<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="jp">
<body>
<div th:fragment="post-list">

    <div style="display: flex; justify-content: flex-end; margin-bottom: 10px;">
        <div class="view-count-selector">
            <button th:classappend="${pageSize == 15} ? 'active'"
                    th:data-url="|/board/${boardName}/list?size=15|"
                    onclick="location.href=this.getAttribute('data-url')">15</button>
            <button th:classappend="${pageSize == 30} ? 'active'"
                    th:data-url="|/board/${boardName}/list?size=30|"
                    onclick="location.href=this.getAttribute('data-url')">30</button>
        </div>
    </div>

    <div class="post-row" th:each="post : ${paging.content}">
        <div class="post-left">
            <span class="post-title"
                  th:text="${post.title}"
                  th:data-url="|/board/${boardName}/post/${post.postId}|"
                  onclick="location.href=this.getAttribute('data-url')"
                  style="cursor: pointer;">タイトル</span>

            <span class="post-comments"
                  th:if="${post.comments != null and !post.comments.isEmpty()}"
                  th:text="'[' + ${post.comments.size()} + ']'">[0]</span>
        </div>

        <div class="post-meta">
            <span th:text="${post.user != null ? post.user.alias : '不明'}">投稿者</span> |
            <span th:text="'閲覧数 ' + ${post.views}">表示 0</span> |
            <span th:text="'いいね ' + ${post.likes}">いいね 0</span> |
            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2026-01-23</span>
        </div>
    </div>

    <div class="pagination" style="text-align: center; margin-top: 20px;" th:if="${!paging.isEmpty()}">
        <a th:href="@{/board/{name}/list(name=${boardName}, page=${paging.number - 1}, size=${pageSize}, keyword=${keyword}, sort=${sort})}"
           class="page-link prev" th:if="${paging.hasPrevious()}">&lt;</a>

        <th:block th:each="pageNumber : ${#numbers.sequence(0, paging.totalPages - 1)}">
            <a th:href="@{/board/{name}/list(name=${boardName}, page=${pageNumber}, size=${pageSize}, keyword=${keyword}, sort=${sort})}"
               th:classappend="${pageNumber == paging.number} ? 'active' : ''"
               class="page-link"
               th:text="${pageNumber + 1}">1</a>
        </th:block>

        <a th:href="@{/board/{name}/list(name=${boardName}, page=${paging.number + 1}, size=${pageSize}, keyword=${keyword}, sort=${sort})}"
           class="page-link next" th:if="${paging.hasNext()}">&gt;</a>
    </div>

    <div class="board-footer-area" style="margin-top: 20px;">
        <div class="board-footer-line" style="border-top: 1px solid #eee; margin-bottom: 15px;"></div>
        <div class="board-controls" style="display: flex; justify-content: space-between; align-items: center;">

            <div class="control-left" style="display: flex; gap: 5px;">
                <button class="btn-sub"
                        th:classappend="${sort == null or sort == 'latest'} ? 'active-sort'"
                        th:data-url="|/board/${boardName}/list?sort=latest&size=${pageSize}|"
                        onclick="location.href=this.getAttribute('data-url')">通常投稿</button>

                <button class="btn-sub"
                        th:classappend="${sort == 'popular'} ? 'active-sort'"
                        th:data-url="|/board/${boardName}/list?sort=popular&size=${pageSize}|"
                        onclick="location.href=this.getAttribute('data-url')">人気投稿</button>
            </div>

            <div class="control-center">
                <form th:action="@{/board/{name}/list(name=${boardName})}" method="get" class="search-form" style="display: flex; gap: 5px;">
                    <input type="hidden" name="size" th:value="${pageSize}">
                    <input type="text" name="keyword" th:value="${keyword}" placeholder="検索ワードを入力してください" style="padding: 5px 10px;">
                    <button type="submit" class="btn-sub">検索</button>
                </form>
            </div>

            <div class="control-right">
                <button class="btn-main"
                        th:data-url="|/board/${boardName}/write|"
                        onclick="location.href=this.getAttribute('data-url')">投稿作成</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>
