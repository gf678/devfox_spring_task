<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<body>
<div th:fragment="post-list">

    <div style="display: flex; justify-content: flex-end; margin-bottom: 10px;">
        <div class="view-count-selector">
            <button th:classappend="${pageSize == 15} ? 'active'"
                    th:data-url="|/board/${boardName}/list?size=15|"
                    onclick="location.href=this.getAttribute('data-url')">15</button>
            <button th:classappend="${pageSize == 30} ? 'active'"
                    th:data-url="|/board/${boardName}/list?size=30|"
                    onclick="location.href=this.getAttribute('data-url')">30</button>
        </div>
    </div>

    <div class="post-row" th:each="post : ${posts}">
        <div class="post-left">
            <span class="post-title"
                  th:text="${post.title}"
                  th:data-url="|/board/${boardName}/post/${post.postId}|"
                  onclick="location.href=this.getAttribute('data-url')"
                  style="cursor: pointer;">タイトル</span>

            <span class="post-comments"
                  th:if="${post.comments != null and !post.comments.isEmpty()}"
                  th:text="'[' + ${post.comments.size()} + ']'">[0]</span>
        </div>

        <div class="post-meta">
            <span th:text="${post.user != null ? post.user.nickname : '알 수 없음'}">投稿者</span> |
            <span th:text="'閲覧数 ' + ${post.views}">表示 0</span> |
            <span th:text="'いいね ' + ${post.likes}">いいね 0</span> |
            <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2026-01-23</span>
        </div>
    </div>

    <div class="pagination" style="text-align: center; margin-top: 20px;">
        <a href="#" class="page-link prev">&lt;</a>
        <th:block th:each="page : ${#numbers.sequence(1, 3)}">
            <a th:href="@{/board/{name}/list(name=${boardName}, page=${page}, size=${pageSize})}"
               th:classappend="${page == 1} ? 'active' : ''"
               class="page-link"
               th:text="${page}">1</a>
        </th:block>
        <a href="#" class="page-link next">&gt;</a>
    </div>

    <div class="board-footer-area" style="margin-top: 20px;">
        <div class="board-footer-line" style="border-top: 1px solid #eee; margin-bottom: 15px;"></div>
        <div class="board-controls" style="display: flex; justify-content: space-between; align-items: center;">

            <div class="control-left">
                <button class="btn-sub"
                        th:data-url="|/board/${boardName}/list?sort=popular|"
                        onclick="location.href=this.getAttribute('data-url')">人気投稿</button>
            </div>

            <div class="control-center">
                <form th:action="@{/board/{name}/list(name=${boardName})}" method="get" class="search-form" style="display: flex; gap: 5px;">
                    <input type="hidden" name="size" th:value="${pageSize}">
                    <input type="text" name="keyword" placeholder="検索ワードを入力してください" style="padding: 5px 10px;">
                    <button type="submit" class="btn-sub">検索</button>
                </form>
            </div>

            <div class="control-right">
                <button class="btn-main"
                        th:data-url="|/board/${boardName}/write|"
                        onclick="location.href=this.getAttribute('data-url')">投稿作成</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>